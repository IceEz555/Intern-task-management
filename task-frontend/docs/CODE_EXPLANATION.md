# Code Logic & Flow Explanation

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Code ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Task Management System ‡∏ó‡∏±‡πâ‡∏á‡∏ù‡∏±‡πà‡∏á Backend ‡πÅ‡∏•‡∏∞ Frontend ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô

---

## üîê 1. Login System (‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô)

### üìå Concept
‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Email ‡πÅ‡∏•‡∏∞ Password ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÇ‡∏î‡∏¢ Password ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ (Hash) ‡∏î‡πâ‡∏ß‡∏¢ `bcrypt` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Role, Status) ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### üñ•Ô∏è Frontend (`src/pages/Auth/Login.jsx`)
1. **User Input**: ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ `email` ‡πÅ‡∏•‡∏∞ `password` ‡∏à‡∏≤‡∏Å Form
2. **Context API**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `login(email, password)` ‡∏à‡∏≤‡∏Å `AuthContext`
3. **Role-Based Redirect**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `user.role` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤:
   - `Admin` -> `/AdminDashboard`
   - `PM` -> `/ProjectManagement`
   - `Member` -> `/admin` (Default)

### ‚öôÔ∏è Backend (`src/controllers/authController.js`)
1. **Query User**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ User ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á `Users` ‡∏î‡πâ‡∏ß‡∏¢ `email`
2. **Validate Password**: ‡πÉ‡∏ä‡πâ `bcrypt.compare()` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Password ‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Hash ‡πÉ‡∏ô Database ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. **Check Status**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `status` ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `'Active'` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
4. **Response**: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• User ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ (‡∏ï‡∏±‡∏î Password ‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)

---

## üë• 2. User Management (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)

### üìå Concept
‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠, ‡∏™‡∏£‡πâ‡∏≤‡∏á, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Database `Users`

### A. Get All Users (‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠)
- **Frontend** (`UserManagement.jsx`): ‡πÉ‡∏ä‡πâ `useEffect` ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `axios.get('/api/users')` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏ó‡∏≥ `initials` (‡∏ï‡∏±‡∏ß‡∏¢‡πà‡∏≠‡∏ä‡∏∑‡πà‡∏≠) ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
- **Backend** (`userController.getUsers`): Query SQL `SELECT ... FROM Users` ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á Array JSON ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤

### B. Create User (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà)
- **Frontend**:
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á Password (Regex: 8+ chars, A-Z, 0-9, special char)
  - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `axios.post('/api/users', formData)`
- **Backend**:
  - ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ `name`, `email`, `role`, `status`, `password`
  - **Hash Password**: ‡πÉ‡∏ä‡πâ `bcrypt.hash(password, 10)` ‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  - **Handle Duplicate**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Error Code `23505` ‡∏ñ‡πâ‡∏≤ Email ‡∏ã‡πâ‡∏≥ ‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á Frontend ‡∏ß‡πà‡∏≤ "Email already registered"
  - **Insert**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Database

### C. Update User (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
- **Frontend**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `axios.put('/api/users/:id')` ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
- **Backend**:
  - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á `password` ‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Hash ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß Update ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ `password` ‡∏™‡πà‡∏á‡∏°‡∏≤ ‡∏à‡∏∞ Update ‡πÅ‡∏Ñ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (Name, Role, Status)

### D. Delete User (‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)
- **Frontend**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `axios.delete('/api/users/:id')`
- **Backend**: ‡∏™‡∏±‡πà‡∏á SQL `DELETE FROM Users WHERE user_id = $1`

---

## üìÅ 3. Project Management (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)

### üìå Concept
‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Project Manager ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≤‡∏á‡πÜ

### A. Dashboard & Stats
- **Frontend** (`ProjectList.jsx`):
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Stats ‡∏ù‡∏±‡πà‡∏á Client: "Tasks Pending" (Total Tasks - Done Tasks)
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Progress Bar ‡∏à‡∏≤‡∏Å `(Done / Total) * 100`
- **Backend** (`projectController.getProjects`):
  - ‡πÉ‡∏ä‡πâ **Subquery** ‡πÉ‡∏ô SQL ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Task (`task_count`) ‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (`done_task_count`) ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ï‡∏≠‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Frontend ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á Task ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏≤‡∏ô‡∏±‡∏ö‡πÄ‡∏≠‡∏á

### B. Create Project
- **Frontend**: Modal Form ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ `project_name`, `description`, `start_date`, `end_date`, `status`
- **Backend**: ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞ Insert ‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `Projects` ‡πÇ‡∏î‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î `created_by` ‡πÄ‡∏õ‡πá‡∏ô User ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ Hardcode ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Auth Middleware ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå)

---

## üõ†Ô∏è ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô Code
1. **Optimistic UI Update**: ‡πÉ‡∏ô Frontend ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Create/Edit/Delete ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï State `users` ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Reload ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏õ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•
2. **Component Reuse**: ‡πÉ‡∏ä‡πâ `Modal` ‡πÅ‡∏•‡∏∞ `Button` ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Common Component ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô
3. **Database Constraints**: ‡πÉ‡∏ä‡πâ Unique Index ‡∏ó‡∏µ‡πà `email` ‡πÉ‡∏ô Database ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö Database Layer ‡∏à‡∏£‡∏¥‡∏á‡πÜ
